<% content_for :title, "Cars" %>

<h1 class="text-2xl text-white font-semibold">
  <%= t('cars.index.title') %>
</h1>

<div class="mt-4">
  <% if (current_user.company.plan == 'free' && current_user.company.cars.count < 2) || (current_user.company.plan == 'paid' && current_user.company.cars.count < 6) %>
    <%= link_to new_car_path(@car), class: "inline-flex items-center bg-[#6D4AFF] hover:bg-[#5A3EDF] transition p-2 rounded-lg" do %>
      <%= image_tag "add.svg", alt: "Add", class: "w-6 h-6 invert" %>
    <% end %>
  <% end %>
</div>

<div class="mt-4 overflow-x-auto">
  <% if @cars.any? %>
    <table class="w-full border border-[#6D4AFF] rounded-lg">
      <thead>
        <tr class="bg-[#6D4AFF] text-white font-semibold text-sm">
          <th class="py-2 px-4 text-center">No</th>
          <th class="py-2 px-4 text-center"><%= t('cars.index.column_name') %></th>
          <th class="py-2 px-4 text-center">Brand & Model</th>
          <th class="py-2 px-4 text-center">Maintenance</th>
          <th class="py-2 px-4 text-center">Fuelings</th>
          <th class="py-2 px-4 text-center">Action</th>
        </tr>
      </thead>

      <tbody>
        <% @cars.each_with_index do |car, index| %>
          <tr class="text-white border-t border-[#6D4AFF] hover:bg-[#2A1C33] transition">
            <td class="text-center py-2 px-4"><%= index + 1 %></td>

            <td class="text-center py-2 px-4">
              <%= link_to car.name, car_path(car),
                class: "hover:text-[#6D4AFF] transition font-medium" %>
            </td>

            <td class="text-center py-2 px-4">
              <%= car.car_model.car_brand.name %> <%= car.car_model.model %> <%= car.car_model.year %>
            </td>

            <td class="text-center py-2 px-4">
              <%= link_to t('cars.index.maintenance_history'),
                car_car_maintenances_path(car),
                class: "hover:text-[#6D4AFF] transition" %>
            </td>

            <td class="text-center py-2 px-4">
              <%= link_to "Fuelings",
                car_car_fuelings_path(car),
                class: "hover:text-[#6D4AFF] transition" %>
            </td>

            <td class="text-center py-2 px-4 flex justify-center gap-3">
              <%= link_to edit_car_path(car),
                class: "hover:scale-110 transition" do %>
                <%= image_tag "edit.svg", class: "w-5 h-5 invert" %>
              <% end %>

              <%= link_to car_path(car),
                class: "hover:scale-110 transition" do %>
                <%= image_tag "show.svg", class: "w-5 h-5 invert" %>
              <% end %>

              <%= button_to car_path(car),
                method: :delete,
                data: { turbo_confirm: "Are you sure?" },
                class: "hover:scale-110 transition" do %>
                <%= image_tag "trash.svg", class: "w-6 h-6 invert" %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>

    </table>

  <% else %>
    <h2 class="text-[#6D4AFF] font-semibold text-lg">You have no cars, please add one ðŸš—</h2>
  <% end %>
</div>
